<?xml version="1.0" encoding="utf-8"?>
<!--
 
#########################################################################
 iDynoMiCS: individual-based Dynamics of Microbial Communities Simulator
#########################################################################
 
-->
<idynomics>
  <!--#####################################################################
        SIMULATOR SECTION
    ######################################################################-->
  <simulator>
    <param name="restartPreviousRun">false</param>
    <param name="randomSeed">44</param>
    <param name="outputPeriod" unit="hour">0.25</param>
    <timeStep>
      <param name="adaptive">false</param>
      <param name="timeStepIni" unit="hour">1</param>
      <param name="timeStepMin" unit="hour">0.025</param>
      <param name="timeStepMax" unit="hour">1</param>
      <param name="endOfSimulation" unit="hour">600</param>
    </timeStep>
    <!-- The AGENTTIMESTEP which should always be EQUAL or LOWER than the global time step -->
    <param name="agentTimeStep" unit="hour">0.05</param>
  </simulator>


  <!--#####################################################################
        INPUT SECTION
    ######################################################################-->
  <input>
    <param name="useAgentFile">false</param>
    <param name="inputAgentFileURL">agent_State(last).xml</param>
    <param name="useBulkFile">false</param>
    <param name="inputBulkFileURL">env_Sum(last).xml</param>
  </input>

  <!--#####################################################################
        SOLUTES AND BIOMASS TYPES SECTION
    ######################################################################-->
  <solute domain="MyYeastColony" name="Glucose">
    <param name="diffusivity" unit="m2.day-1">9e-5</param>
  </solute>
  
  <solute domain="MyYeastColony" name="pressure">
    <param name="diffusivity" unit="m2.day-1">1</param>
  </solute>

  <particle name="biomass">
    <param name="density" unit="g.L-1">150</param>
  </particle>
  <particle name="inert">
    <param name="density" unit="g.L-1">150</param>
  </particle>
  <!--#####################################################################
        WORLD SECTION
    ######################################################################-->
  <world>
    <agar name="myAgar">
      <param name="depth" unit="unknown">10</param>
      <param name="width" unit="unknown">33</param>
      <param name="height" unit="unknown">1</param>
      <param name="concentration" unit="unknown">5.5</param>
      <param name="D" unit="h-1">1</param>
      <param name="advRate" unit="unknown">2.5e-4</param>
      <param name="T" unit="unknown">300</param>
      <param name="updateFreq" unit="unknown">1</param>
    </agar>

    <computationDomain name="MyYeastColony">
      <grid nDim="2" nI="33" nJ="33" nK="1"/>
      <param name="resolution" unit="um">8</param>
      <param name="boundaryLayer" unit="um">0</param>
      <param name="biofilmDiffusivity">.2</param>
      <param name="specificArea" unit="m2.m-3">80</param>

      <boundaryCondition class="BoundaryAgar" name="y0z">
        <param name="agar">myAgar</param>
        <shape class="Planar">
          <param name="pointIn" x="-1" y="0" z="0"/>
          <param name="vectorOut" x="-1" y="0" z="0"/>
        </shape>
      </boundaryCondition>

      <boundaryCondition class="BoundaryZeroFlux" name="yNz">
        <shape class="Planar">
          <param name="pointIn" x="33" y="0" z="0"/>
          <param name="vectorOut" x="1" y="0" z="0"/>
        </shape>
      </boundaryCondition>

      <boundaryCondition class="BoundaryZeroFlux" name="x0z">
        <shape class="Planar">
          <param name="pointIn" x="0" y="-1" z="0"/>
          <param name="vectorOut" x="0" y="-1" z="0"/>
        </shape>
      </boundaryCondition>
      <boundaryCondition class="BoundaryZeroFlux" name="xNz">
        <shape class="Planar">
          <param name="pointIn" x="0" y="33" z="0"/>
          <param name="vectorOut" x="0" y="1" z="0"/>
        </shape>
      </boundaryCondition>
    </computationDomain>
  </world>
  <!--#####################################################################
        REACTION SECTION
    ######################################################################-->
  <reaction catalyzedBy="biomass" class="ReactionFactor" name="Growth">
    <param name="muMax" unit="hour-1">.025</param>
    <kineticFactor class="MonodKinetic" solute="Glucose">
      <param name="Ks" unit="g.L-1">5e-3</param>
    </kineticFactor>
    <yield>
      <param name="Glucose" unit="g.g-1">-20</param>
      <param name="biomass" unit="g.g-1">2.2</param>
    </yield>
  </reaction>
  <!--#####################################################################
        SOLVER SECTION
    ######################################################################-->
  <solver class="SolverSimple" domain="MyYeastColony" name="solutes">
    <param name="active">true</param>
    <param name="preStep">150</param>
    <param name="postStep">150</param>
    <param name="coarseStep">1500</param>
    <param name="nCycles">5</param>
    <reaction name="Growth"/>
  </solver>
  <solver class="Solver_pressure" domain="MyYeastColony" name="pressure">
    <param name="active">true</param>
  </solver>
  <!--#####################################################################
        AGENT GRID SECTION
    ######################################################################-->
  <agentGrid>
    <param name="computationDomain">MyYeastColony</param>
    <param name="resolution" unit="um">8</param>
    <param name="shovingMaxNodes">2e6</param>
    <param name="shovingFraction">0.025</param>
    <param name="shovingMaxIter">250</param>
    <param name="shovingMutual">true</param>
  </agentGrid>
  <!--#####################################################################
        SPECIES SECTION
    ######################################################################-->
  <species class="Yeast" name="MyGrowingYeast">
    <particle name="biomass">
      <param name="mass" unit="fg">12000</param>
    </particle>
    <particle name="inert">
      <param name="mass" unit="fg">70</param>
    </particle>
    <param name="color">blue</param>
    <param name="computationDomain">MyYeastColony</param>
    <param name="divRadius" unit="um">2.5</param>
    <param name="deathRadius" unit="um">0.2</param>
    <param name="shoveFactor" unit="um">1.15</param>
    <param name="shoveLimit" unit="um">0.</param>
    <param name="epsMax">0.5</param>
    <param name="kHyd" unit="hr-1">0.1</param>
    <param name="useActivationInhibition" unit="bit">true</param>
    <param name="neighborhoodRadiusCoefficient" unit="number">4</param>
    <reaction name="Growth" status="active"/>

    <!-- This species will be attracted towards itself -->
    <adhesions>
      <adhesion strength=".2" withSpecies="MyGrowingYeast"/> 
    </adhesions>

      <!-- Will initialize the simulation with one cell of this species at coordinates (0, 130, 0)-->
    <initArea number="1" shape="default"> 
      <param name="birthday" unit="hour">0</param>
      <coordinates x="0" y="130" z="0"/>
      <coordinates x="0" y="130" z="0"/>
    </initArea>
  </species>
</idynomics>
